"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[945],{1190:(e,t,a)=>{a.d(t,{A:()=>y});var r=a(5155),s=a(2115),n=a(3458),i=a(4788),l=a(4269);let o=n.bL;n.l9;let d=n.ZL;n.bm;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});c.displayName=n.hJ.displayName;let u=s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[s,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.UC.displayName;let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};m.displayName="DialogHeader";let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});f.displayName=n.hE.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});p.displayName=n.VY.displayName;var x=a(3998),h=a(5142),g=a(7287);function y(e){let{open:t,onOpenChange:a}=e,[n,i]=(0,s.useState)(!1),[l,d]=(0,s.useState)(""),[c,y]=(0,s.useState)(""),[v,b]=(0,s.useState)(""),[N,j]=(0,s.useState)(""),{signIn:w,signUp:C,loading:k}=(0,g.Z)(),E=async e=>{e.preventDefault(),j("");try{let e;(e=n?await C(l,c,v):await w(l,c)).error?j(e.error):(a(!1),d(""),y(""),b(""))}catch(e){j("An unexpected error occurred")}};return(0,r.jsx)(o,{open:t,onOpenChange:a,children:(0,r.jsxs)(u,{className:"sm:max-w-md",children:[(0,r.jsxs)(m,{children:[(0,r.jsx)(f,{children:n?"Create Account":"Sign In"}),(0,r.jsx)(p,{children:n?"Enter your details to create a new account":"Enter your credentials to sign in to your account"})]}),(0,r.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[n&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium mb-1",children:"Full Name"}),(0,r.jsx)(h.p,{id:"name",type:"text",value:v,onChange:e=>b(e.target.value),placeholder:"Enter your full name",required:n})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email"}),(0,r.jsx)(h.p,{id:"email",type:"email",value:l,onChange:e=>d(e.target.value),placeholder:"Enter your email",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",children:"Password"}),(0,r.jsx)(h.p,{id:"password",type:"password",value:c,onChange:e=>y(e.target.value),placeholder:"Enter your password",required:!0})]}),N&&(0,r.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:N}),(0,r.jsx)(x.$,{type:"submit",className:"w-full",disabled:k,children:k?"Please wait...":n?"Create Account":"Sign In"})]}),(0,r.jsx)("div",{className:"text-center text-sm",children:n?(0,r.jsxs)(r.Fragment,{children:["Already have an account?"," ",(0,r.jsx)("button",{type:"button",onClick:()=>i(!1),className:"text-primary hover:underline",children:"Sign in"})]}):(0,r.jsxs)(r.Fragment,{children:["Don't have an account?"," ",(0,r.jsx)("button",{type:"button",onClick:()=>i(!0),className:"text-primary hover:underline",children:"Sign up"})]})})]})})}},2074:(e,t,a)=>{a.d(t,{A:()=>E});var r=a(5155),s=a(2115),n=a(3458),i=a(3101),l=a(4788),o=a(4269);let d=n.bL;n.l9,n.bm;let c=n.ZL,u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});u.displayName=n.hJ.displayName;let m=(0,i.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),f=s.forwardRef((e,t)=>{let{side:a="right",className:s,children:i,...d}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.UC,{ref:t,className:(0,o.cn)(m({side:a}),s),...d,children:[i,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.UC.displayName;let p=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};p.displayName="SheetHeader";let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold text-foreground",a),...s})});x.displayName=n.hE.displayName;let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});h.displayName=n.VY.displayName;var g=a(3998),y=a(6948),v=a(7740),b=a(8891),N=a(7667),j=a(9044),w=a(8570),C=a(2619),k=a.n(C);function E(e){let{open:t,onOpenChange:a}=e,{items:s,total:n,itemCount:i,updateQuantity:l,removeItem:o,clearCart:c}=(0,v._)(),u=(e,t)=>{t<=0?o(e):l(e,t)};return(0,r.jsx)(d,{open:t,onOpenChange:a,children:(0,r.jsxs)(f,{className:"w-[400px] sm:w-[540px]",children:[(0,r.jsxs)(p,{children:[(0,r.jsx)(x,{children:"Shopping Cart"}),(0,r.jsxs)(h,{children:[i," ",1===i?"item":"items"," in your cart"]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto py-6",children:0===s.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[(0,r.jsx)(b.A,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Your cart is empty"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"Add some items to get started"}),(0,r.jsx)(g.$,{onClick:()=>a(!1),children:"Continue Shopping"})]}):(0,r.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,r.jsx)(y.Zp,{children:(0,r.jsx)(y.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-100 to-purple-100 rounded-md flex items-center justify-center overflow-hidden",children:e.image?(0,r.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover",onError:t=>{console.error("Cart image failed to load:",e.image),t.currentTarget.style.display="none"}}):(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC57"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h4",{className:"font-semibold truncate",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Size: ",e.size," | Color: ",e.color]}),(0,r.jsxs)("p",{className:"text-lg font-bold text-primary",children:["AED ",e.price]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,r.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>o(e.id),className:"h-8 w-8 text-red-500 hover:text-red-700",children:(0,r.jsx)(N.A,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(g.$,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>u(e.id,e.quantity-1),children:(0,r.jsx)(j.A,{className:"h-4 w-4"})}),(0,r.jsx)("span",{className:"w-8 text-center",children:e.quantity}),(0,r.jsx)(g.$,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>u(e.id,e.quantity+1),children:(0,r.jsx)(w.A,{className:"h-4 w-4"})})]})]})]})})},"".concat(e.id,"-").concat(e.size,"-").concat(e.color)))})}),s.length>0&&(0,r.jsxs)("div",{className:"border-t pt-4 space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center text-lg font-semibold",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsxs)("span",{children:["AED ",n.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(g.$,{asChild:!0,className:"w-full",children:(0,r.jsx)(k(),{href:"/checkout",onClick:()=>a(!1),children:"Proceed to Checkout"})}),(0,r.jsx)(g.$,{variant:"outline",onClick:c,className:"w-full",children:"Clear Cart"})]})]})]})})}},3998:(e,t,a)=>{a.d(t,{$:()=>d});var r=a(5155),s=a(2115),n=a(2467),i=a(3101),l=a(4269);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:a})),ref:t,...c})});d.displayName="Button"},4269:(e,t,a)=>{a.d(t,{cn:()=>n});var r=a(2821),s=a(5915);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.Q)((0,r.$)(t))}},5142:(e,t,a)=>{a.d(t,{p:()=>i});var r=a(5155),s=a(2115),n=a(4269);let i=s.forwardRef((e,t)=>{let{className:a,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"},6948:(e,t,a)=>{a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>u});var r=a(5155),s=a(2115),n=a(4269);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},7287:(e,t,a)=>{a.d(t,{Z:()=>l,h:()=>i});var r=a(5155),s=a(2115);let n=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,s.useState)(null),[l,o]=(0,s.useState)(!0);(0,s.useEffect)(()=>{try{let e=localStorage.getItem("convexUser");e&&i(JSON.parse(e))}catch(e){console.error("Error checking session:",e)}finally{o(!1)}},[]);let d=async(e,t)=>{try{if(o(!0),"admin@guzarishh.com"===e&&"admin123"===t){let e={_id:"mock-id",userId:"admin-user-id",email:"admin@guzarishh.com",name:"Admin User",role:"superadmin"};return localStorage.setItem("convexUser",JSON.stringify(e)),i(e),{error:void 0}}if("user@example.com"!==e||"user123"!==t)return{error:"Invalid credentials"};{let e={_id:"mock-user-id",userId:"user-id",email:"user@example.com",name:"Test User",role:"user"};return localStorage.setItem("convexUser",JSON.stringify(e)),i(e),{error:void 0}}}catch(e){return{error:e.message||"Sign in failed"}}finally{o(!1)}},c=async(e,t,a)=>{try{o(!0);let t={_id:"mock-".concat(Date.now()),userId:"user-".concat(Date.now()),email:e,name:a||"New User",role:"user"};return localStorage.setItem("guzarishh_user",JSON.stringify(t)),i(t),{error:void 0}}catch(e){return{error:e.message||"Sign up failed"}}finally{o(!1)}},u=async()=>{try{localStorage.removeItem("convexUser"),i(null)}catch(e){console.error("Error signing out:",e)}};return(0,r.jsx)(n.Provider,{value:{user:a,loading:l,signIn:d,signUp:c,signOut:u,isAdmin:()=>(console.log("Checking admin status:",{user:a,role:null==a?void 0:a.role}),(null==a?void 0:a.role)==="admin"||(null==a?void 0:a.role)==="superadmin"),isSuperAdmin:()=>(null==a?void 0:a.role)==="superadmin"},children:t})}function l(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useConvexAuth must be used within a ConvexAuthProvider");return e}},7740:(e,t,a)=>{a.d(t,{_:()=>d,e:()=>o});var r=a(5155),s=a(2115);let n={items:[],total:0,itemCount:0};function i(e,t){switch(t.type){case"ADD_ITEM":{let a=e.items.find(e=>e.id===t.payload.id&&e.size===t.payload.size&&e.color===t.payload.color);if(a){let t=e.items.map(e=>e.id===a.id&&e.size===a.size&&e.color===a.color?{...e,quantity:e.quantity+1}:e);return{...e,items:t,total:t.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:t.reduce((e,t)=>e+t.quantity,0)}}let r={...t.payload,quantity:1},s=[...e.items,r];return{...e,items:s,total:s.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:s.reduce((e,t)=>e+t.quantity,0)}}case"REMOVE_ITEM":{let a=e.items.filter(e=>e.id!==t.payload);return{...e,items:a,total:a.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:a.reduce((e,t)=>e+t.quantity,0)}}case"REMOVE_ITEM_BY_PRODUCT_ID":{let a=e.items.filter(e=>e.id!==t.payload);return{...e,items:a,total:a.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:a.reduce((e,t)=>e+t.quantity,0)}}case"UPDATE_QUANTITY":{let a=e.items.map(e=>e.id===t.payload.id?{...e,quantity:Math.max(0,t.payload.quantity)}:e).filter(e=>e.quantity>0);return{...e,items:a,total:a.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:a.reduce((e,t)=>e+t.quantity,0)}}case"CLEAR_CART":return n;default:return e}}let l=(0,s.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,s.useReducer)(i,n);return(0,r.jsx)(l.Provider,{value:{...a,addItem:e=>{o({type:"ADD_ITEM",payload:e})},removeItem:e=>{o({type:"REMOVE_ITEM",payload:e})},removeItemByProductId:e=>{o({type:"REMOVE_ITEM_BY_PRODUCT_ID",payload:e})},updateQuantity:(e,t)=>{o({type:"UPDATE_QUANTITY",payload:{id:e,quantity:t}})},clearCart:()=>{o({type:"CLEAR_CART"})}},children:t})}function d(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}}]);