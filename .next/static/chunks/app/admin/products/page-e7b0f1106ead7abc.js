(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{63:(e,r,t)=>{"use strict";var s=t(7260);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},313:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(2115),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},l=(e,r)=>{let t=(0,s.forwardRef)((t,l)=>{let{color:i="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:c,children:d,...u}=t;return(0,s.createElement)("svg",{ref:l,...a,width:n,height:n,stroke:i,strokeWidth:c?24*Number(o)/Number(n):o,className:"lucide lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),...u},[...r.map(e=>{let[r,t]=e;return(0,s.createElement)(r,t)}),...(Array.isArray(d)?d:[d])||[]])});return t.displayName="".concat(e),t}},1092:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(313).A)("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]])},1276:(e,r,t)=>{Promise.resolve().then(t.bind(t,8550))},1647:(e,r,t)=>{"use strict";t.d(r,{E:()=>n});var s=t(5155);t(2115);var a=t(3101),l=t(4269);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:r,variant:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)(i({variant:t}),r),...a})}},2450:(e,r,t)=>{"use strict";t.d(r,{F:()=>s});let s=t(5991).dp},2809:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(313).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},3998:(e,r,t)=>{"use strict";t.d(r,{$:()=>c});var s=t(5155),a=t(2115),l=t(2467),i=t(3101),n=t(4269);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:c=!1,...d}=e,u=c?l.DX:"button";return(0,s.jsx)(u,{className:(0,n.cn)(o({variant:a,size:i,className:t})),ref:r,...d})});c.displayName="Button"},4269:(e,r,t)=>{"use strict";t.d(r,{cn:()=>l});var s=t(2821),a=t(5915);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.Q)((0,s.$)(r))}},4786:(e,r,t)=>{"use strict";t.d(r,{C:()=>c,L:()=>d});var s=t(5155),a=t(2115),l=t(617),i=t(2450),n=t(7287);let o=(0,a.createContext)(void 0);function c(e){let{children:r}=e,{user:t}=(0,n.Z)(),a=(0,l.IT)(i.F.products.getAll,t?{}:"skip")||[],c=(0,l.n_)(i.F.products.create),d=(0,l.n_)(i.F.products.update),u=(0,l.n_)(i.F.products.remove),m=async e=>{try{await c({name:e.name,price:e.price,originalPrice:e.originalPrice,image:e.image,images:e.images,rating:e.rating,reviews:e.reviews,category:e.category,description:e.description,size:e.size,colors:e.colors,inStock:e.inStock,stockQuantity:e.stockQuantity,tags:e.tags,featured:e.featured})}catch(e){throw console.error("Error adding product:",e),e}},x=async(e,r)=>{try{await d({id:e,...r})}catch(e){throw console.error("Error updating product:",e),e}},h=async e=>{try{await u({id:e})}catch(e){throw console.error("Error deleting product:",e),e}};return(0,s.jsx)(o.Provider,{value:{products:t?a:[],loading:void 0===a,addProduct:m,updateProduct:x,deleteProduct:h,searchProducts:e=>t?e?a.filter(r=>{var t,s;return r.name.toLowerCase().includes(e.toLowerCase())||(null==(t=r.description)?void 0:t.toLowerCase().includes(e.toLowerCase()))||(null==(s=r.tags)?void 0:s.some(r=>r.toLowerCase().includes(e.toLowerCase())))}):a:[],getProductsByCategory:e=>t?a.filter(r=>r.category===e):[],getFeaturedProducts:()=>t?a.filter(e=>e.featured):[]},children:r})}function d(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useConvexProducts must be used within a ConvexProductProvider");return e}},4788:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(313).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5142:(e,r,t)=>{"use strict";t.d(r,{p:()=>i});var s=t(5155),a=t(2115),l=t(4269);let i=a.forwardRef((e,r)=>{let{className:t,type:a,...i}=e;return(0,s.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...i})});i.displayName="Input"},6948:(e,r,t)=>{"use strict";t.d(r,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>n,wL:()=>u});var s=t(5155),a=t(2115),l=t(4269);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let n=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...a})});n.displayName="CardHeader";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h3",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("p",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},7230:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(313).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7287:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n,h:()=>i});var s=t(5155),a=t(2115);let l=(0,a.createContext)(void 0);function i(e){let{children:r}=e,[t,i]=(0,a.useState)(null),[n,o]=(0,a.useState)(!0);(0,a.useEffect)(()=>{try{let e=localStorage.getItem("convexUser");e&&i(JSON.parse(e))}catch(e){console.error("Error checking session:",e)}finally{o(!1)}},[]);let c=async(e,r)=>{try{if(o(!0),"admin@guzarishh.com"===e&&"admin123"===r){let e={_id:"mock-id",userId:"admin-user-id",email:"admin@guzarishh.com",name:"Admin User",role:"superadmin"};return localStorage.setItem("convexUser",JSON.stringify(e)),i(e),{error:void 0}}if("user@example.com"!==e||"user123"!==r)return{error:"Invalid credentials"};{let e={_id:"mock-user-id",userId:"user-id",email:"user@example.com",name:"Test User",role:"user"};return localStorage.setItem("convexUser",JSON.stringify(e)),i(e),{error:void 0}}}catch(e){return{error:e.message||"Sign in failed"}}finally{o(!1)}},d=async(e,r,t)=>{try{o(!0);let r={_id:"mock-".concat(Date.now()),userId:"user-".concat(Date.now()),email:e,name:t||"New User",role:"user"};return localStorage.setItem("guzarishh_user",JSON.stringify(r)),i(r),{error:void 0}}catch(e){return{error:e.message||"Sign up failed"}}finally{o(!1)}},u=async()=>{try{localStorage.removeItem("convexUser"),i(null)}catch(e){console.error("Error signing out:",e)}};return(0,s.jsx)(l.Provider,{value:{user:t,loading:n,signIn:c,signUp:d,signOut:u,isAdmin:()=>(console.log("Checking admin status:",{user:t,role:null==t?void 0:t.role}),(null==t?void 0:t.role)==="admin"||(null==t?void 0:t.role)==="superadmin"),isSuperAdmin:()=>(null==t?void 0:t.role)==="superadmin"},children:r})}function n(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useConvexAuth must be used within a ConvexAuthProvider");return e}},7667:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(313).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8550:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>A});var s=t(5155),a=t(2115),l=t(63),i=t(7287),n=t(4786),o=t(6948),c=t(3998),d=t(5142),u=t(1647),m=t(7230),x=t(313);let h=(0,x.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var g=t(1092),p=t(2809),f=t(7667),v=t(8570),y=t(4788),j=t(617),b=t(2450);let N=(0,x.A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),w=(0,x.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),k=(0,x.A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);function C(e){let{onImageUpload:r,onImageRemove:t,images:l=[],maxImages:i=6,aspectRatio:n="aspect-[3/4]"}=e,[d,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),h=(0,a.useRef)(null),g=(0,j.n_)(b.F.storage.generateUploadUrl),p=(0,j.BN)(),f=(0,a.useCallback)(async e=>{if(0===e.length)return;let t=e[0];if(!t.type.startsWith("image/"))return void alert("Please select an image file");if(t.size>5242880)return void alert("File size must be less than 5MB");if(l.length>=i)return void alert("Maximum ".concat(i," images allowed"));x(!0);try{let e=await g(),s=await fetch(e,{method:"POST",headers:{"Content-Type":t.type},body:t}),{storageId:a}=await s.json(),l=await p.query(b.F.storage.getImageUrl,{storageId:a});if(console.log("Upload details:",{uploadUrl:e,storageId:a,convexUrl:l}),l)r(l,a);else{console.error("Failed to get Convex URL for storageId:",a);let t="".concat(e.split("?")[0],"/").concat(a);console.log("Using fallback URL:",t),r(t,a)}}catch(e){console.error("Error uploading image:",e),alert("Failed to upload image. Please try again.")}finally{x(!1)}},[l.length,i,g,r]),v=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?u(!0):"dragleave"===e.type&&u(!1)},[]),C=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),u(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&f(e.dataTransfer.files)},[f]),S=(0,a.useCallback)(e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&f(e.target.files)},[f]),A=()=>{var e;null==(e=h.current)||e.click()};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative border-2 border-dashed rounded-lg p-6 text-center transition-colors ".concat(d?"border-primary bg-primary/5":"border-gray-300 hover:border-gray-400"," ").concat(m?"opacity-50 pointer-events-none":""),onDragEnter:v,onDragLeave:v,onDragOver:v,onDrop:C,children:[(0,s.jsx)("input",{ref:h,type:"file",accept:"image/*",onChange:S,className:"hidden",disabled:m||l.length>=i}),(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[m?(0,s.jsx)(N,{className:"h-8 w-8 animate-spin text-primary"}):(0,s.jsx)(w,{className:"h-8 w-8 text-gray-400"}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:m?"Uploading...":l.length>=i?"Maximum ".concat(i," images reached"):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",onClick:A,className:"text-primary hover:text-primary/80 font-medium",children:"Click to upload"})," ","or drag and drop"]})}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 5MB"})]})]}),l.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:l.map((e,r)=>(0,s.jsx)(o.Zp,{className:"relative group overflow-hidden",children:(0,s.jsx)(o.Wu,{className:"p-0",children:(0,s.jsxs)("div",{className:"".concat(n," relative"),children:[(0,s.jsx)("img",{src:e.url,alt:"Upload ".concat(r+1),className:"w-full h-full object-cover"}),(0,s.jsx)(c.$,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>t(e.storageId),children:(0,s.jsx)(y.A,{className:"h-3 w-3"})}),0===r&&(0,s.jsx)("div",{className:"absolute bottom-2 left-2",children:(0,s.jsx)("span",{className:"bg-primary text-primary-foreground text-xs px-2 py-1 rounded",children:"Main"})})]})})},r))}),l.length<i&&!m&&(0,s.jsxs)(c.$,{type:"button",variant:"outline",onClick:A,className:"w-full",children:[(0,s.jsx)(k,{className:"h-4 w-4 mr-2"}),"Add More Images (",l.length,"/",i,")"]})]})}function S(e){var r,t;let{product:l,onSubmit:i,onCancel:m,loading:x=!1}=e,{addProduct:h,updateProduct:g}=(0,n.L)(),[p,f]=(0,a.useState)(!1),[j,b]=(0,a.useState)({name:(null==l?void 0:l.name)||"",price:(null==l?void 0:l.price)||0,originalPrice:(null==l?void 0:l.originalPrice)||0,image:(null==l?void 0:l.image)||"",images:(null==l?void 0:l.images)||[],category:(null==l?void 0:l.category)||"Casual",description:(null==l?void 0:l.description)||"",size:(null==l?void 0:l.size)||"",colors:(null==l?void 0:l.colors)||[],inStock:null==(r=null==l?void 0:l.inStock)||r,stockQuantity:(null==l?void 0:l.stockQuantity)||0,tags:(null==l?void 0:l.tags)||[],featured:null!=(t=null==l?void 0:l.featured)&&t}),[N,w]=(0,a.useState)([]),[k,S]=(0,a.useState)(""),[A,P]=(0,a.useState)(""),E=async e=>{e.preventDefault(),f(!0);try{let e=[],r=j.image;N.length>0?(e=N.map(e=>e.url),r=N[0].url):e=j.images||[];let t={...j,image:r,images:e};delete t.sizes,console.log("Sending product data to Convex:",t),l?await g(l._id,t):await h(t),alert(l?"Product updated successfully!":"Product added successfully!"),m()}catch(e){console.error("Error submitting form:",e),alert("An unexpected error occurred")}finally{f(!1)}};return(0,s.jsxs)(o.Zp,{className:"w-full max-w-4xl mx-auto",children:[(0,s.jsxs)(o.aR,{children:[(0,s.jsx)(o.ZB,{children:l?"Edit Product":"Add New Product"}),(0,s.jsx)(o.BT,{children:l?"Update product information":"Fill in the details to add a new product"})]}),(0,s.jsx)(o.Wu,{children:(0,s.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Product Name *"}),(0,s.jsx)(d.p,{value:j.name,onChange:e=>b(r=>({...r,name:e.target.value})),placeholder:"Enter product name",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Category *"}),(0,s.jsxs)("select",{value:j.category,onChange:e=>b(r=>({...r,category:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md",required:!0,children:[(0,s.jsx)("option",{value:"Casual",children:"Casual"}),(0,s.jsx)("option",{value:"Festive",children:"Festive"}),(0,s.jsx)("option",{value:"Office",children:"Office"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Price (₹) *"}),(0,s.jsx)(d.p,{type:"number",value:j.price,onChange:e=>b(r=>({...r,price:Number(e.target.value)})),placeholder:"Enter price",required:!0,min:"0"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Original Price (₹)"}),(0,s.jsx)(d.p,{type:"number",value:j.originalPrice,onChange:e=>b(r=>({...r,originalPrice:Number(e.target.value)})),placeholder:"Enter original price",min:"0"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"inStock",checked:j.inStock,onChange:e=>b(r=>({...r,inStock:e.target.checked})),className:"rounded"}),(0,s.jsx)("label",{htmlFor:"inStock",className:"text-sm font-medium",children:"In Stock"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Stock Quantity"}),(0,s.jsx)(d.p,{type:"number",value:j.stockQuantity,onChange:e=>b(r=>({...r,stockQuantity:Number(e.target.value)})),placeholder:"Enter stock quantity",min:"0"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Description"}),(0,s.jsx)("textarea",{value:j.description,onChange:e=>b(r=>({...r,description:e.target.value})),placeholder:"Enter product description",className:"w-full p-2 border border-gray-300 rounded-md h-24 resize-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Product Images *"}),(0,s.jsx)(C,{onImageUpload:(e,r)=>{let t={url:e,storageId:r};w(e=>[...e,t]),0===N.length&&b(r=>({...r,image:e}))},onImageRemove:e=>{w(r=>{var t;let s=r.filter(r=>r.storageId!==e);return j.image===(null==(t=r.find(r=>r.storageId===e))?void 0:t.url)&&b(e=>({...e,image:s.length>0?s[0].url:""})),s})},images:N,maxImages:6,aspectRatio:"aspect-[3/4]"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Upload images to preview them. Images will be saved when you submit the form."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Size *"}),(0,s.jsxs)("select",{value:j.size,onChange:e=>b(r=>({...r,size:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a size"}),(0,s.jsx)("option",{value:"XS",children:"XS"}),(0,s.jsx)("option",{value:"S",children:"S"}),(0,s.jsx)("option",{value:"M",children:"M"}),(0,s.jsx)("option",{value:"L",children:"L"}),(0,s.jsx)("option",{value:"XL",children:"XL"}),(0,s.jsx)("option",{value:"XXL",children:"XXL"}),(0,s.jsx)("option",{value:"One Size",children:"One Size"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Colors"}),(0,s.jsxs)("div",{className:"flex space-x-2 mb-2",children:[(0,s.jsx)(d.p,{value:k,onChange:e=>S(e.target.value),placeholder:"Enter color (e.g., Red, Blue, Green)"}),(0,s.jsx)(c.$,{type:"button",onClick:()=>{k.trim()&&!j.colors.includes(k.trim())&&(b(e=>({...e,colors:[...e.colors,k.trim()]})),S(""))},size:"sm",children:(0,s.jsx)(v.A,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:j.colors.map((e,r)=>(0,s.jsxs)(u.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,s.jsx)(y.A,{className:"h-3 w-3 cursor-pointer",onClick:()=>{b(r=>({...r,colors:r.colors.filter(r=>r!==e)}))}})]},r))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Tags"}),(0,s.jsxs)("div",{className:"flex space-x-2 mb-2",children:[(0,s.jsx)(d.p,{value:A,onChange:e=>P(e.target.value),placeholder:"Enter tag (e.g., cotton, comfortable)"}),(0,s.jsx)(c.$,{type:"button",onClick:()=>{A.trim()&&!j.tags.includes(A.trim())&&(b(e=>({...e,tags:[...e.tags,A.trim()]})),P(""))},size:"sm",children:(0,s.jsx)(v.A,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:j.tags.map((e,r)=>(0,s.jsxs)(u.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,s.jsx)(y.A,{className:"h-3 w-3 cursor-pointer",onClick:()=>{b(r=>({...r,tags:r.tags.filter(r=>r!==e)}))}})]},r))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"featured",checked:j.featured,onChange:e=>b(r=>({...r,featured:e.target.checked})),className:"rounded"}),(0,s.jsx)("label",{htmlFor:"featured",className:"text-sm font-medium",children:"Featured Product"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,s.jsx)(c.$,{type:"button",variant:"outline",onClick:m,children:"Cancel"}),(0,s.jsx)(c.$,{type:"submit",disabled:p||x,children:p?"Saving...":l?"Update Product":"Add Product"})]})]})})]})}function A(){let{user:e,loading:r,isAdmin:t}=(0,i.Z)(),{products:x,deleteProduct:y,searchProducts:j}=(0,n.L)(),b=(0,l.useRouter)(),[N,w]=(0,a.useState)(""),[k,C]=(0,a.useState)([]),[A,P]=(0,a.useState)(!1),[E,F]=(0,a.useState)(null),[z,I]=(0,a.useState)("all"),[L,R]=(0,a.useState)(null);(0,a.useEffect)(()=>{console.log("Admin products page - auth check:",{user:e,loading:r,isAdmin:t()}),r||t()||(console.log("Redirecting to home - not admin"),b.push("/"))},[e,r,t,b]),(0,a.useEffect)(()=>{let e=j(N);"all"!==z&&(e=e.filter(e=>e.category===z)),C(e)},[N,z,x,j]);let U=async e=>{try{await y(e),R(null)}catch(e){alert("Failed to delete product: "+e)}};return r?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,s.jsx)("p",{children:"Loading..."})]})}):t()?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,s.jsx)("div",{className:"flex-1 w-full",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,s.jsx)(d.p,{placeholder:"Search products by name, description, or tags...",value:N,onChange:e=>w(e.target.value),className:"pl-10"})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(h,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("select",{value:z,onChange:e=>I(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[(0,s.jsx)("option",{value:"all",children:"All Categories"}),(0,s.jsx)("option",{value:"Casual",children:"Casual"}),(0,s.jsx)("option",{value:"Festive",children:"Festive"}),(0,s.jsx)("option",{value:"Office",children:"Office"})]})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsx)(o.Zp,{children:(0,s.jsx)(o.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Products"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:x.length})]}),(0,s.jsx)(g.A,{className:"h-8 w-8 text-muted-foreground"})]})})}),(0,s.jsx)(o.Zp,{children:(0,s.jsx)(o.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Casual"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:x.filter(e=>"Casual"===e.category).length})]}),(0,s.jsx)(u.E,{variant:"secondary",children:"Casual"})]})})}),(0,s.jsx)(o.Zp,{children:(0,s.jsx)(o.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Festive"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:x.filter(e=>"Festive"===e.category).length})]}),(0,s.jsx)(u.E,{variant:"secondary",children:"Festive"})]})})}),(0,s.jsx)(o.Zp,{children:(0,s.jsx)(o.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Office"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:x.filter(e=>"Office"===e.category).length})]}),(0,s.jsx)(u.E,{variant:"secondary",children:"Office"})]})})})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:k.map(e=>(0,s.jsxs)(o.Zp,{className:"group hover:shadow-lg transition-shadow",children:[(0,s.jsxs)("div",{className:"aspect-[3/4] bg-gradient-to-br from-pink-100 to-purple-100 flex items-center justify-center relative overflow-hidden",children:[e.image?(0,s.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover",onError:r=>{console.error("Admin image failed to load:",e.image),r.currentTarget.style.display="none"}}):(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDC57"}),(0,s.jsx)(u.E,{variant:"secondary",className:"text-xs",children:e.category})]}),(0,s.jsxs)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex space-x-1",children:[(0,s.jsx)(c.$,{size:"icon",variant:"secondary",className:"h-8 w-8",onClick:()=>{F(e),P(!1)},children:(0,s.jsx)(p.A,{className:"h-4 w-4"})}),(0,s.jsx)(c.$,{size:"icon",variant:"destructive",className:"h-8 w-8",onClick:()=>R(e._id),children:(0,s.jsx)(f.A,{className:"h-4 w-4"})})]}),e.featured&&(0,s.jsx)(u.E,{className:"absolute top-2 left-2 bg-yellow-500",children:"Featured"})]}),(0,s.jsxs)(o.Wu,{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2 truncate",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsxs)("span",{className:"text-lg font-bold text-primary",children:["₹",e.price]}),e.originalPrice&&e.originalPrice>e.price&&(0,s.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:["₹",e.originalPrice]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-2",children:[(0,s.jsxs)("span",{children:["Rating: ",e.rating]}),(0,s.jsxs)("span",{children:[e.reviews," reviews"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)(u.E,{variant:e.inStock?"default":"destructive",children:e.inStock?"In Stock":"Out of Stock"}),e.stockQuantity&&(0,s.jsxs)("span",{className:"text-muted-foreground",children:["Qty: ",e.stockQuantity]})]}),e.tags&&e.tags.length>0&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,2).map((e,r)=>(0,s.jsx)(u.E,{variant:"outline",className:"text-xs",children:e},r)),e.tags.length>2&&(0,s.jsxs)(u.E,{variant:"outline",className:"text-xs",children:["+",e.tags.length-2]})]})]})]},e._id))}),0===k.length&&!A&&!E&&(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)(g.A,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:N||"all"!==z?"Try adjusting your search terms or filters":"Get started by adding your first product"}),(0,s.jsxs)(c.$,{onClick:()=>{F(null),P(!0)},children:[(0,s.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})]}),(A||E)&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,s.jsx)(S,{product:E||void 0,onSubmit:()=>{},onCancel:()=>{P(!1),F(null)}})})}),L&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)(o.Zp,{className:"w-full max-w-md",children:[(0,s.jsxs)(o.aR,{children:[(0,s.jsx)(o.ZB,{children:"Delete Product"}),(0,s.jsx)(o.BT,{children:"Are you sure you want to delete this product? This action cannot be undone."})]}),(0,s.jsxs)(o.Wu,{className:"flex justify-end space-x-2",children:[(0,s.jsx)(c.$,{variant:"outline",onClick:()=>R(null),children:"Cancel"}),(0,s.jsx)(c.$,{variant:"destructive",onClick:()=>U(L),children:"Delete"})]})]})})]}):null}},8570:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(313).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},e=>{e.O(0,[397,215,441,255,358],()=>e(e.s=1276)),_N_E=e.O()}]);