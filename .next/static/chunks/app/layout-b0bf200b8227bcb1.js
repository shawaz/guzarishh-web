(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2405:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,8963,23)),Promise.resolve().then(t.t.bind(t,3673,23)),Promise.resolve().then(t.bind(t,6674))},2450:(e,r,t)=>{"use strict";t.d(r,{F:()=>o});let o=t(5991).dp},3673:()=>{},4786:(e,r,t)=>{"use strict";t.d(r,{C:()=>l,L:()=>c});var o=t(5155),i=t(2115),a=t(617),n=t(2450),s=t(7287);let u=(0,i.createContext)(void 0);function l(e){let{children:r}=e,{user:t}=(0,s.Z)(),i=(0,a.IT)(n.F.products.getAll,t?{}:"skip")||[],l=(0,a.n_)(n.F.products.create),c=(0,a.n_)(n.F.products.update),d=(0,a.n_)(n.F.products.remove),m=async e=>{try{await l({name:e.name,price:e.price,originalPrice:e.originalPrice,image:e.image,images:e.images,rating:e.rating,reviews:e.reviews,category:e.category,description:e.description,size:e.size,colors:e.colors,inStock:e.inStock,stockQuantity:e.stockQuantity,tags:e.tags,featured:e.featured})}catch(e){throw console.error("Error adding product:",e),e}},y=async(e,r)=>{try{await c({id:e,...r})}catch(e){throw console.error("Error updating product:",e),e}},p=async e=>{try{await d({id:e})}catch(e){throw console.error("Error deleting product:",e),e}};return(0,o.jsx)(u.Provider,{value:{products:t?i:[],loading:void 0===i,addProduct:m,updateProduct:y,deleteProduct:p,searchProducts:e=>t?e?i.filter(r=>{var t,o;return r.name.toLowerCase().includes(e.toLowerCase())||(null==(t=r.description)?void 0:t.toLowerCase().includes(e.toLowerCase()))||(null==(o=r.tags)?void 0:o.some(r=>r.toLowerCase().includes(e.toLowerCase())))}):i:[],getProductsByCategory:e=>t?i.filter(r=>r.category===e):[],getFeaturedProducts:()=>t?i.filter(e=>e.featured):[]},children:r})}function c(){let e=(0,i.useContext)(u);if(void 0===e)throw Error("useConvexProducts must be used within a ConvexProductProvider");return e}},6674:(e,r,t)=>{"use strict";t.d(r,{Providers:()=>l});var o=t(5155),i=t(617),a=t(7287),n=t(4786),s=t(7740);let u=new i.eH("https://cheerful-oriole-552.convex.cloud");function l(e){let{children:r}=e;return(0,o.jsx)(i.hD,{client:u,children:(0,o.jsx)(a.h,{children:(0,o.jsx)(n.C,{children:(0,o.jsx)(s.e,{children:r})})})})}},7287:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s,h:()=>n});var o=t(5155),i=t(2115);let a=(0,i.createContext)(void 0);function n(e){let{children:r}=e,[t,n]=(0,i.useState)(null),[s,u]=(0,i.useState)(!0);(0,i.useEffect)(()=>{try{let e=localStorage.getItem("convexUser");e&&n(JSON.parse(e))}catch(e){console.error("Error checking session:",e)}finally{u(!1)}},[]);let l=async(e,r)=>{try{if(u(!0),"admin@guzarishh.com"===e&&"admin123"===r){let e={_id:"mock-id",userId:"admin-user-id",email:"admin@guzarishh.com",name:"Admin User",role:"superadmin"};return localStorage.setItem("convexUser",JSON.stringify(e)),n(e),{error:void 0}}if("user@example.com"!==e||"user123"!==r)return{error:"Invalid credentials"};{let e={_id:"mock-user-id",userId:"user-id",email:"user@example.com",name:"Test User",role:"user"};return localStorage.setItem("convexUser",JSON.stringify(e)),n(e),{error:void 0}}}catch(e){return{error:e.message||"Sign in failed"}}finally{u(!1)}},c=async(e,r,t)=>{try{u(!0);let r={_id:"mock-".concat(Date.now()),userId:"user-".concat(Date.now()),email:e,name:t||"New User",role:"user"};return localStorage.setItem("guzarishh_user",JSON.stringify(r)),n(r),{error:void 0}}catch(e){return{error:e.message||"Sign up failed"}}finally{u(!1)}},d=async()=>{try{localStorage.removeItem("convexUser"),n(null)}catch(e){console.error("Error signing out:",e)}};return(0,o.jsx)(a.Provider,{value:{user:t,loading:s,signIn:l,signUp:c,signOut:d,isAdmin:()=>(console.log("Checking admin status:",{user:t,role:null==t?void 0:t.role}),(null==t?void 0:t.role)==="admin"||(null==t?void 0:t.role)==="superadmin"),isSuperAdmin:()=>(null==t?void 0:t.role)==="superadmin"},children:r})}function s(){let e=(0,i.useContext)(a);if(void 0===e)throw Error("useConvexAuth must be used within a ConvexAuthProvider");return e}},7740:(e,r,t)=>{"use strict";t.d(r,{_:()=>l,e:()=>u});var o=t(5155),i=t(2115);let a={items:[],total:0,itemCount:0};function n(e,r){switch(r.type){case"ADD_ITEM":{let t=e.items.find(e=>e.id===r.payload.id&&e.size===r.payload.size&&e.color===r.payload.color);if(t){let r=e.items.map(e=>e.id===t.id&&e.size===t.size&&e.color===t.color?{...e,quantity:e.quantity+1}:e);return{...e,items:r,total:r.reduce((e,r)=>e+r.price*r.quantity,0),itemCount:r.reduce((e,r)=>e+r.quantity,0)}}let o={...r.payload,quantity:1},i=[...e.items,o];return{...e,items:i,total:i.reduce((e,r)=>e+r.price*r.quantity,0),itemCount:i.reduce((e,r)=>e+r.quantity,0)}}case"REMOVE_ITEM":{let t=e.items.filter(e=>e.id!==r.payload);return{...e,items:t,total:t.reduce((e,r)=>e+r.price*r.quantity,0),itemCount:t.reduce((e,r)=>e+r.quantity,0)}}case"REMOVE_ITEM_BY_PRODUCT_ID":{let t=e.items.filter(e=>e.id!==r.payload);return{...e,items:t,total:t.reduce((e,r)=>e+r.price*r.quantity,0),itemCount:t.reduce((e,r)=>e+r.quantity,0)}}case"UPDATE_QUANTITY":{let t=e.items.map(e=>e.id===r.payload.id?{...e,quantity:Math.max(0,r.payload.quantity)}:e).filter(e=>e.quantity>0);return{...e,items:t,total:t.reduce((e,r)=>e+r.price*r.quantity,0),itemCount:t.reduce((e,r)=>e+r.quantity,0)}}case"CLEAR_CART":return a;default:return e}}let s=(0,i.createContext)(void 0);function u(e){let{children:r}=e,[t,u]=(0,i.useReducer)(n,a);return(0,o.jsx)(s.Provider,{value:{...t,addItem:e=>{u({type:"ADD_ITEM",payload:e})},removeItem:e=>{u({type:"REMOVE_ITEM",payload:e})},removeItemByProductId:e=>{u({type:"REMOVE_ITEM_BY_PRODUCT_ID",payload:e})},updateQuantity:(e,r)=>{u({type:"UPDATE_QUANTITY",payload:{id:e,quantity:r}})},clearCart:()=>{u({type:"CLEAR_CART"})}},children:r})}function l(){let e=(0,i.useContext)(s);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},8963:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_f367f3"}}},e=>{e.O(0,[300,215,441,255,358],()=>e(e.s=2405)),_N_E=e.O()}]);