(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{4772:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var i=r(5155),s=r(7287),a=r(7740),n=r(5704);function l(){let{user:e,signIn:t,signOut:r}=(0,s.Z)(),{items:l,addItem:o,total:d}=(0,a._)();return(0,i.jsxs)("div",{className:"container mx-auto p-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"\uD83E\uDDEA Test Page"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,i.jsxs)("div",{className:"border p-6 rounded-lg",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDD10 Authentication Test"}),e?(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:"mb-4",children:["✅ Signed in as: ",e.name||e.email]}),(0,i.jsx)("button",{onClick:r,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"Sign Out"})]}):(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"mb-4",children:"❌ Not signed in"}),(0,i.jsx)("button",{onClick:()=>{t("test@example.com","password")},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Test Sign In"})]})]}),(0,i.jsxs)("div",{className:"border p-6 rounded-lg",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDED2 Cart Test"}),(0,i.jsxs)("p",{className:"mb-2",children:["Items in cart: ",l.length]}),(0,i.jsxs)("p",{className:"mb-4",children:["Total: $",d.toFixed(2)]}),(0,i.jsx)("button",{onClick:()=>{o({id:"1",name:"Test Product",price:99.99,image:"/test-image.jpg",size:"M",color:"Red"})},className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"Add Test Item"})]})]}),(0,i.jsxs)("div",{className:"mt-8 border p-6 rounded-lg",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\uD83D\uDD27 Environment Check"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("p",{children:["Convex URL: ","✅ Set"]}),(0,i.jsxs)("p",{children:["Auth Secret: ",n.env.BETTER_AUTH_SECRET?"✅ Set":"❌ Not set"]})]})]}),(0,i.jsx)("div",{className:"mt-8 text-center",children:(0,i.jsx)("a",{href:"/",className:"text-blue-500 hover:text-blue-600 underline",children:"← Back to Home"})})]})}},7287:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l,h:()=>n});var i=r(5155),s=r(2115);let a=(0,s.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,s.useState)(null),[l,o]=(0,s.useState)(!0);(0,s.useEffect)(()=>{try{let e=localStorage.getItem("convexUser");e&&n(JSON.parse(e))}catch(e){console.error("Error checking session:",e)}finally{o(!1)}},[]);let d=async(e,t)=>{try{if(o(!0),"admin@guzarishh.com"===e&&"admin123"===t){let e={_id:"mock-id",userId:"admin-user-id",email:"admin@guzarishh.com",name:"Admin User",role:"superadmin"};return localStorage.setItem("convexUser",JSON.stringify(e)),n(e),{error:void 0}}if("user@example.com"!==e||"user123"!==t)return{error:"Invalid credentials"};{let e={_id:"mock-user-id",userId:"user-id",email:"user@example.com",name:"Test User",role:"user"};return localStorage.setItem("convexUser",JSON.stringify(e)),n(e),{error:void 0}}}catch(e){return{error:e.message||"Sign in failed"}}finally{o(!1)}},c=async(e,t,r)=>{try{o(!0);let t={_id:"mock-".concat(Date.now()),userId:"user-".concat(Date.now()),email:e,name:r||"New User",role:"user"};return localStorage.setItem("guzarishh_user",JSON.stringify(t)),n(t),{error:void 0}}catch(e){return{error:e.message||"Sign up failed"}}finally{o(!1)}},u=async()=>{try{localStorage.removeItem("convexUser"),n(null)}catch(e){console.error("Error signing out:",e)}};return(0,i.jsx)(a.Provider,{value:{user:r,loading:l,signIn:d,signUp:c,signOut:u,isAdmin:()=>(console.log("Checking admin status:",{user:r,role:null==r?void 0:r.role}),(null==r?void 0:r.role)==="admin"||(null==r?void 0:r.role)==="superadmin"),isSuperAdmin:()=>(null==r?void 0:r.role)==="superadmin"},children:t})}function l(){let e=(0,s.useContext)(a);if(void 0===e)throw Error("useConvexAuth must be used within a ConvexAuthProvider");return e}},7740:(e,t,r)=>{"use strict";r.d(t,{_:()=>d,e:()=>o});var i=r(5155),s=r(2115);let a={items:[],total:0,itemCount:0};function n(e,t){switch(t.type){case"ADD_ITEM":{let r=e.items.find(e=>e.id===t.payload.id&&e.size===t.payload.size&&e.color===t.payload.color);if(r){let t=e.items.map(e=>e.id===r.id&&e.size===r.size&&e.color===r.color?{...e,quantity:e.quantity+1}:e);return{...e,items:t,total:t.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:t.reduce((e,t)=>e+t.quantity,0)}}let i={...t.payload,quantity:1},s=[...e.items,i];return{...e,items:s,total:s.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:s.reduce((e,t)=>e+t.quantity,0)}}case"REMOVE_ITEM":{let r=e.items.filter(e=>e.id!==t.payload);return{...e,items:r,total:r.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:r.reduce((e,t)=>e+t.quantity,0)}}case"REMOVE_ITEM_BY_PRODUCT_ID":{let r=e.items.filter(e=>e.id!==t.payload);return{...e,items:r,total:r.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:r.reduce((e,t)=>e+t.quantity,0)}}case"UPDATE_QUANTITY":{let r=e.items.map(e=>e.id===t.payload.id?{...e,quantity:Math.max(0,t.payload.quantity)}:e).filter(e=>e.quantity>0);return{...e,items:r,total:r.reduce((e,t)=>e+t.price*t.quantity,0),itemCount:r.reduce((e,t)=>e+t.quantity,0)}}case"CLEAR_CART":return a;default:return e}}let l=(0,s.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,s.useReducer)(n,a);return(0,i.jsx)(l.Provider,{value:{...r,addItem:e=>{o({type:"ADD_ITEM",payload:e})},removeItem:e=>{o({type:"REMOVE_ITEM",payload:e})},removeItemByProductId:e=>{o({type:"REMOVE_ITEM_BY_PRODUCT_ID",payload:e})},updateQuantity:(e,t)=>{o({type:"UPDATE_QUANTITY",payload:{id:e,quantity:t}})},clearCart:()=>{o({type:"CLEAR_CART"})}},children:t})}function d(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},8434:(e,t,r)=>{Promise.resolve().then(r.bind(r,4772))}},e=>{e.O(0,[441,255,358],()=>e(e.s=8434)),_N_E=e.O()}]);