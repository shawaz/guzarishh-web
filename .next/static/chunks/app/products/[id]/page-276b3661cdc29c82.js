(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{63:(e,r,t)=>{"use strict";var s=t(7260);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},313:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(2115),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},a=(e,r)=>{let t=(0,s.forwardRef)((t,a)=>{let{color:n="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:d,...u}=t;return(0,s.createElement)("svg",{ref:a,...i,width:o,height:o,stroke:n,strokeWidth:c?24*Number(l)/Number(o):l,className:"lucide lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),...u},[...r.map(e=>{let[r,t]=e;return(0,s.createElement)(r,t)}),...(Array.isArray(d)?d:[d])||[]])});return t.displayName="".concat(e),t}},756:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(313).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},946:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f});var s=t(5155),i=t(2115),a=t(63),n=t(4786),o=t(7287),l=t(7740),c=t(3998),d=t(1647),u=t(3229),m=t(7274),h=t(9044),x=t(8570),g=t(756);function f(){let e=(0,a.useParams)(),r=(0,a.useRouter)(),{user:t}=(0,o.Z)(),{products:f,loading:v}=(0,n.L)(),{addItem:p,items:y,removeItemByProductId:j}=(0,l._)(),[b,N]=(0,i.useState)(null),[w,C]=(0,i.useState)(""),[k,A]=(0,i.useState)(""),[E,_]=(0,i.useState)(1),[P,S]=(0,i.useState)(0);if((0,i.useEffect)(()=>{if(!t)return void r.push("/login");if(f.length>0){let r=f.find(r=>r._id===e.id);if(r){var s;N(r),C(r.size||""),A((null==(s=r.colors)?void 0:s[0])||"Default")}}},[f,e.id,t,r]),!t)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Please sign in to view products"}),(0,s.jsx)(c.$,{onClick:()=>r.push("/login"),children:"Sign In"})]})});if(v)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-lg",children:"Loading product..."})]})});if(!b)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Product not found"}),(0,s.jsxs)(c.$,{onClick:()=>r.push("/"),children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Back to Home"]})]})});let I=y.some(e=>e.id===b._id),z=[b.image,...b.images||[]].filter(Boolean);return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"container max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsxs)(c.$,{variant:"ghost",onClick:()=>r.back(),className:"mb-6",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"aspect-[3/4] bg-white rounded-lg overflow-hidden",children:z[P]?(0,s.jsx)("img",{src:z[P],alt:b.name,className:"w-full h-full object-cover",onError:e=>{console.error("Product detail image failed to load:",z[P]),e.currentTarget.style.display="none"}}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-pink-100 to-purple-100",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDC57"}),(0,s.jsx)(d.E,{variant:"secondary",className:"text-sm",children:b.category})]})})}),z.length>1&&(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2",children:z.map((e,r)=>(0,s.jsx)("button",{onClick:()=>S(r),className:"aspect-square rounded-lg overflow-hidden border-2 ".concat(P===r?"border-primary":"border-gray-200"),children:(0,s.jsx)("img",{src:e,alt:"".concat(b.name," ").concat(r+1),className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none"}})},r))})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(d.E,{variant:"outline",children:b.category}),b.featured&&(0,s.jsx)(d.E,{className:"bg-yellow-500",children:"Featured"})]}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:b.name}),(0,s.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(m.A,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}),(0,s.jsx)("span",{className:"text-lg font-medium",children:b.rating}),(0,s.jsxs)("span",{className:"text-gray-500",children:["(",b.reviews," reviews)"]})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsxs)("span",{className:"text-3xl font-bold text-primary",children:["₹",b.price]}),b.originalPrice&&b.originalPrice>b.price&&(0,s.jsxs)("span",{className:"text-xl text-gray-500 line-through",children:["₹",b.originalPrice]})]})]}),b.description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),(0,s.jsx)("p",{className:"text-gray-600",children:b.description})]}),b.size&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Size"}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(c.$,{variant:w===b.size?"default":"outline",onClick:()=>C(b.size),children:b.size})})]}),b.colors&&b.colors.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Color"}),(0,s.jsx)("div",{className:"flex gap-2",children:b.colors.map(e=>(0,s.jsx)(c.$,{variant:k===e?"default":"outline",onClick:()=>A(e),children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Quantity"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(c.$,{variant:"outline",size:"icon",onClick:()=>_(Math.max(1,E-1)),children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsx)("span",{className:"text-lg font-medium w-8 text-center",children:E}),(0,s.jsx)(c.$,{variant:"outline",size:"icon",onClick:()=>_(E+1),children:(0,s.jsx)(x.A,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.E,{variant:b.inStock?"default":"destructive",children:b.inStock?"In Stock":"Out of Stock"}),b.stockQuantity&&(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:[b.stockQuantity," available"]})]}),b.tags&&b.tags.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Tags"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:b.tags.map((e,r)=>(0,s.jsx)(d.E,{variant:"outline",children:e},r))})]}),(0,s.jsxs)("div",{className:"flex gap-4 pt-6",children:[I?(0,s.jsxs)(c.$,{variant:"outline",className:"flex-1",onClick:()=>{j(b._id)},children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Remove from Cart"]}):(0,s.jsxs)(c.$,{className:"flex-1",onClick:()=>{if(!w)return void alert("Please select a size");p({id:b._id,name:b.name,price:b.price,image:b.image,size:w,color:k})},disabled:!b.inStock,children:[(0,s.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Add to Cart"]}),(0,s.jsx)(c.$,{variant:"outline",size:"icon",children:(0,s.jsx)(g.A,{className:"h-4 w-4"})})]})]})]})]})})}},1647:(e,r,t)=>{"use strict";t.d(r,{E:()=>o});var s=t(5155);t(2115);var i=t(3101),a=t(4269);let n=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:r,variant:t,...i}=e;return(0,s.jsx)("div",{className:(0,a.cn)(n({variant:t}),r),...i})}},2450:(e,r,t)=>{"use strict";t.d(r,{F:()=>s});let s=t(5991).dp},3229:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(313).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3998:(e,r,t)=>{"use strict";t.d(r,{$:()=>c});var s=t(5155),i=t(2115),a=t(2467),n=t(3101),o=t(4269);let l=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,r)=>{let{className:t,variant:i,size:n,asChild:c=!1,...d}=e,u=c?a.DX:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:i,size:n,className:t})),ref:r,...d})});c.displayName="Button"},4269:(e,r,t)=>{"use strict";t.d(r,{cn:()=>a});var s=t(2821),i=t(5915);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,i.Q)((0,s.$)(r))}},4786:(e,r,t)=>{"use strict";t.d(r,{C:()=>c,L:()=>d});var s=t(5155),i=t(2115),a=t(617),n=t(2450),o=t(7287);let l=(0,i.createContext)(void 0);function c(e){let{children:r}=e,{user:t}=(0,o.Z)(),i=(0,a.IT)(n.F.products.getAll,t?{}:"skip")||[],c=(0,a.n_)(n.F.products.create),d=(0,a.n_)(n.F.products.update),u=(0,a.n_)(n.F.products.remove),m=async e=>{try{await c({name:e.name,price:e.price,originalPrice:e.originalPrice,image:e.image,images:e.images,rating:e.rating,reviews:e.reviews,category:e.category,description:e.description,size:e.size,colors:e.colors,inStock:e.inStock,stockQuantity:e.stockQuantity,tags:e.tags,featured:e.featured})}catch(e){throw console.error("Error adding product:",e),e}},h=async(e,r)=>{try{await d({id:e,...r})}catch(e){throw console.error("Error updating product:",e),e}},x=async e=>{try{await u({id:e})}catch(e){throw console.error("Error deleting product:",e),e}};return(0,s.jsx)(l.Provider,{value:{products:t?i:[],loading:void 0===i,addProduct:m,updateProduct:h,deleteProduct:x,searchProducts:e=>t?e?i.filter(r=>{var t,s;return r.name.toLowerCase().includes(e.toLowerCase())||(null==(t=r.description)?void 0:t.toLowerCase().includes(e.toLowerCase()))||(null==(s=r.tags)?void 0:s.some(r=>r.toLowerCase().includes(e.toLowerCase())))}):i:[],getProductsByCategory:e=>t?i.filter(r=>r.category===e):[],getFeaturedProducts:()=>t?i.filter(e=>e.featured):[]},children:r})}function d(){let e=(0,i.useContext)(l);if(void 0===e)throw Error("useConvexProducts must be used within a ConvexProductProvider");return e}},7274:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(313).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},7287:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o,h:()=>n});var s=t(5155),i=t(2115);let a=(0,i.createContext)(void 0);function n(e){let{children:r}=e,[t,n]=(0,i.useState)(null),[o,l]=(0,i.useState)(!0);(0,i.useEffect)(()=>{try{let e=localStorage.getItem("convexUser");e&&n(JSON.parse(e))}catch(e){console.error("Error checking session:",e)}finally{l(!1)}},[]);let c=async(e,r)=>{try{if(l(!0),"admin@guzarishh.com"===e&&"admin123"===r){let e={_id:"mock-id",userId:"admin-user-id",email:"admin@guzarishh.com",name:"Admin User",role:"superadmin"};return localStorage.setItem("convexUser",JSON.stringify(e)),n(e),{error:void 0}}if("user@example.com"!==e||"user123"!==r)return{error:"Invalid credentials"};{let e={_id:"mock-user-id",userId:"user-id",email:"user@example.com",name:"Test User",role:"user"};return localStorage.setItem("convexUser",JSON.stringify(e)),n(e),{error:void 0}}}catch(e){return{error:e.message||"Sign in failed"}}finally{l(!1)}},d=async(e,r,t)=>{try{l(!0);let r={_id:"mock-".concat(Date.now()),userId:"user-".concat(Date.now()),email:e,name:t||"New User",role:"user"};return localStorage.setItem("guzarishh_user",JSON.stringify(r)),n(r),{error:void 0}}catch(e){return{error:e.message||"Sign up failed"}}finally{l(!1)}},u=async()=>{try{localStorage.removeItem("convexUser"),n(null)}catch(e){console.error("Error signing out:",e)}};return(0,s.jsx)(a.Provider,{value:{user:t,loading:o,signIn:c,signUp:d,signOut:u,isAdmin:()=>(console.log("Checking admin status:",{user:t,role:null==t?void 0:t.role}),(null==t?void 0:t.role)==="admin"||(null==t?void 0:t.role)==="superadmin"),isSuperAdmin:()=>(null==t?void 0:t.role)==="superadmin"},children:r})}function o(){let e=(0,i.useContext)(a);if(void 0===e)throw Error("useConvexAuth must be used within a ConvexAuthProvider");return e}},7740:(e,r,t)=>{"use strict";t.d(r,{_:()=>c,e:()=>l});var s=t(5155),i=t(2115);let a={items:[],total:0,itemCount:0};function n(e,r){switch(r.type){case"ADD_ITEM":{let t=e.items.find(e=>e.id===r.payload.id&&e.size===r.payload.size&&e.color===r.payload.color);if(t){let r=e.items.map(e=>e.id===t.id&&e.size===t.size&&e.color===t.color?{...e,quantity:e.quantity+1}:e);return{...e,items:r,total:r.reduce((e,r)=>e+r.price*r.quantity,0),itemCount:r.reduce((e,r)=>e+r.quantity,0)}}let s={...r.payload,quantity:1},i=[...e.items,s];return{...e,items:i,total:i.reduce((e,r)=>e+r.price*r.quantity,0),itemCount:i.reduce((e,r)=>e+r.quantity,0)}}case"REMOVE_ITEM":{let t=e.items.filter(e=>e.id!==r.payload);return{...e,items:t,total:t.reduce((e,r)=>e+r.price*r.quantity,0),itemCount:t.reduce((e,r)=>e+r.quantity,0)}}case"REMOVE_ITEM_BY_PRODUCT_ID":{let t=e.items.filter(e=>e.id!==r.payload);return{...e,items:t,total:t.reduce((e,r)=>e+r.price*r.quantity,0),itemCount:t.reduce((e,r)=>e+r.quantity,0)}}case"UPDATE_QUANTITY":{let t=e.items.map(e=>e.id===r.payload.id?{...e,quantity:Math.max(0,r.payload.quantity)}:e).filter(e=>e.quantity>0);return{...e,items:t,total:t.reduce((e,r)=>e+r.price*r.quantity,0),itemCount:t.reduce((e,r)=>e+r.quantity,0)}}case"CLEAR_CART":return a;default:return e}}let o=(0,i.createContext)(void 0);function l(e){let{children:r}=e,[t,l]=(0,i.useReducer)(n,a);return(0,s.jsx)(o.Provider,{value:{...t,addItem:e=>{l({type:"ADD_ITEM",payload:e})},removeItem:e=>{l({type:"REMOVE_ITEM",payload:e})},removeItemByProductId:e=>{l({type:"REMOVE_ITEM_BY_PRODUCT_ID",payload:e})},updateQuantity:(e,r)=>{l({type:"UPDATE_QUANTITY",payload:{id:e,quantity:r}})},clearCart:()=>{l({type:"CLEAR_CART"})}},children:r})}function c(){let e=(0,i.useContext)(o);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},7840:(e,r,t)=>{Promise.resolve().then(t.bind(t,946))},8570:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(313).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9044:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(313).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])}},e=>{e.O(0,[397,215,441,255,358],()=>e(e.s=7840)),_N_E=e.O()}]);